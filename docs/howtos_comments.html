<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Comments and Markup &#8212; Document Cloud View SDK</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/js/jquery-1.11.0.min.js"></script>
    <script src="_static/js/jquery-fix.js"></script>
    <script src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Analytics" href="howtodata.html" />
    <link rel="prev" title="UI customization" href="howtos_ui.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name='robots' content='noindex,nofollow'/>

<!--code for code snippets, tabs, styling-->
  <link rel="stylesheet" href="_static/jquery-ui-themes-1.12.1/themes/base/jquery-ui.css">
  <script src="_static/jquery-ui-1.12.1/jquery-ui.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?skin=desert"></script>

    <script>
  $( function() {
    $( ".tabs" ).tabs();

    $('.langmode').click(function () {
      $(".tabs").tabs("option", "active", $(this).data('index'));
    });
  } );
  </script>
  
<script>
var heightMsgCounter = 0;
var heightMsgValue = 0;
var scrollMsgCounter = 0;
var scrollMsgValue = -10000;
function postDocHeight() {
  var doc = window.document;
  var body = doc.body;
  var height = body.clientHeight;
  var data = {
      "action" : "resize",
      "height" : height,
  };
  window.parent.postMessage(JSON.stringify(data), "*");
  heightMsgValue = height;
  //console.log("height: ", height);
  setInterval(function(){
      if (heightMsgCounter<=20) {
          height = body.clientHeight;
          data = {
              "action": "resize",
              "height": height,
          };
          if (height !== heightMsgValue) {
              //console.log("sending again height:", height);
              window.parent.postMessage(JSON.stringify(data), "*");
              heightMsgValue = height;
          }
          heightMsgCounter++;
      }
  },300);
}
window.addEventListener("resize", postDocHeight);
function handleAnchorClick(e) {
    scrollMsgValue = -10000;
    var input = e.target;
    if (input.nodeName.toLowerCase() !== "a") {
        input = e.target.parentNode;
    }
    if (input.nodeName.toLowerCase() !== "a") {
        //console.log("Non anchor tag received");
        return;
    }
    var hrefVal = input.attributes.href.value;
    if (hrefVal.indexOf('#')===0) {
        clickOnSubLink(hrefVal.substring(1));
        return false;
    }
};
function clickOnSubLink(linkId) {
    var scrollTo = 0;
    if (linkId) {
        var divElement = document.getElementById(linkId);
        //console.log("divElement:",divElement);
        if (divElement) {
            var rect = divElement.getBoundingClientRect();
            //console.log("linkrect:", rect);
            scrollTo = Math.ceil(rect.top);
        }
    }
    var data = {
        "action" : "scrollTo",
        "scrollTo" : scrollTo,
    };
    //console.log("link id:", linkId," scrollTo:", scrollTo);
    if (scrollTo !== scrollMsgValue) {
        //console.log("scroll again");
        window.parent.postMessage(JSON.stringify(data), "*");
        scrollMsgValue = scrollTo;
    }
};
$(document).ready(function() {
    var links = document.querySelectorAll("a");
    var i = 0;
    for (i = 0; i < links.length; i++) {
        var href = links[i].href;
        //console.log("link href ", href);
        if (href.indexOf("#") !== -1) {
            var anchor = href.substring(href.lastIndexOf("#") + 1);
            //console.log("Enabling click on ", anchor);
            links[i].addEventListener('click', handleAnchorClick);
        }
    }
    $("a[href^='http']").attr('target', '_blank');
    $("a[href$='docsvcs_doc_pdftools#://']").removeAttr('target');
    $("a[href$='docsvcs_doc_pdftools']").removeAttr('target');

    postDocHeight();
    setInterval(function(){
        if (window.location.hash && scrollMsgCounter<=20) {
            //console.log("window Location hash:", window.location.hash);
            var divId = window.location.hash.substring(1);
            clickOnSubLink(divId);
            scrollMsgCounter++;
        }
    }, 300);
});
</script>
<script type='text/javascript'> window.marketingtech = { adobe: {launch: {property: "global", environment: "production"}},};</script>
<script src="https://www.adobe.com/marketingtech/main.min.js"></script>
  
<!-- override styles here. Note that sphinx defines some styles in JS rather than CSS -->
<style type="text/css">
.headerlink {display:none;}
.toctree-l1 {font-weight:bold;}
.toctree-l2 {font-weight:normal;}
.removed_globaltoc {}
div.shadow {	
	-webkit-box-shadow: 4px 4px 8px 0px rgba(50, 50, 50, 0.75);
	-moz-box-shadow: 4px 4px 8px 0px rgba(50, 50, 50, 0.75);
	box-shadow: 4px 4px 8px 0px rgba(50, 50, 50, 0.75);
	margin:2em;
	}
td {text-align: left;}
blockquote > div > ul.simple {font-size:80%;}
p { margin-bottom: 1em; }
h2 { margin-top: 2em; }
h3 { margin-top: 2em; }
div.local {border:none;}
img {
  max-width: 98%;
	-webkit-box-shadow: 4px 4px 8px 0px rgba(50, 50, 50, 0.75);
	-moz-box-shadow: 4px 4px 8px 0px rgba(50, 50, 50, 0.75);
	box-shadow: 4px 4px 8px 0px rgba(50, 50, 50, 0.75);
  margin: 1em 0 2.5em 1em
}
.cmdline {
	word-wrap: break-word;
	font-family: Courier, 'New Courier', monospace;
	font-size: 12px;
	border-radius: 3px;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	margin: 0;
	padding: 1em;
	background-color: #ffffff;
	color: Black;
}
</style>

  </head><body>
<div class="container">

  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><li  style="list-style:none;">
<!-- removing the globaltoc class results in all heading2 (toctreel2) appearing in the left hand nav-->
	 <ul class="removed_globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Quickstarts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#getting-credentials">Getting credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#copy-it-run-it">Copy it. Run it.</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#run-ready-samples">Run ready samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#live-demo">Live demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#supported-browsers">Supported browsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#mobile-support">Mobile support</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#feedback-and-forum">Feedback and forum</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="howtos.html">PDF Embed API basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howtos.html#embed-a-pdf-viewer">Embed a PDF viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos.html#passing-file-content">Passing file content</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos.html#pdf-linearization">PDF Linearization</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos.html#embed-modes">Embed modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos.html#language-support">Language support</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="howtos_ui.html">UI customization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#menu-and-tool-options">Menu and tool options</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#annotations">Annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#callbacks-workflows">Callbacks &amp; workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#user-profiles">User profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#user-settings">User settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#save-a-pdf">Save a PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#status-callback">Status callback</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#forms-handling">Forms handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtos_ui.html#viewer-api">Viewer API</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Comments and Markup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#single-line-implementation">Single line implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commenting-feature-overview">Commenting feature overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#annotations-api-overview">Annotations API overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#annotation-schema">Annotation schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#annotations-interface">Annotations interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-apis-for-commenting">Basic APIs for commenting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#annotation-events">Annotation events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handling-existing-annotations">Handling existing annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#apis-to-control-ui-configurations">APIs to control UI configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-samples">Code Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="howtodata.html">Analytics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howtodata.html#adobe-analytics">Adobe Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtodata.html#default-analytics">Default analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtodata.html#basic-events">Basic events</a></li>
<li class="toctree-l2"><a class="reference internal" href="howtodata.html#annotation-events">Annotation events</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="searchengineindexing.html">Handle search engine indexing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="searchengineindexing.html#sitemap">Sitemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="searchengineindexing.html#alternative-approaches">Alternative approaches</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="releasenotes.html#change-history">Change history</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://www.adobe.com/go/docsvcs_doc_pdftools#://">Go to the PDF Services API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.adobe.com/go/pdftoolsapi_forum#://">Community forum</a></li>
</ul>
</ul>
</li>
        </div>
      </div>
    <div class="col-md-9 content">
<div>
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
</div><br/>

      
  <section id="comments-and-markup">
<span id="annotsapi"></span><h1>Comments and Markup<a class="headerlink" href="#comments-and-markup" title="Permalink to this headline">¶</a></h1>
<p>The Embed API provides the capability to add comments to PDF documents using the commenting and markup tools. You can add comments with add text comment tool, sticky notes, highlights, drawing tool, strikethrough and underline text.  In addition to these tools, there is also an eraser tool which can be used to erase parts of drawing annotations. In addition to these, there are undo and redo tools available in the top bar.</p>
<img alt="_images/annotstoolsoverview.png" src="_images/annotstoolsoverview.png" />
<img alt="_images/commentpane.png" src="_images/commentpane.png" />
<section id="single-line-implementation">
<span id="comment"></span><h2>Single line implementation<a class="headerlink" href="#single-line-implementation" title="Permalink to this headline">¶</a></h2>
<p>You can enable/disable commenting tools with a single line. Commenting is enabled by <em>default</em> with the Embed API and the commenting tools are displayed in the top bar. You can disable commenting by adding <code class="docutils literal notranslate"><span class="pre">showAnnotationTools:</span> <span class="pre">false</span></code> (line 9) to the previewConfig object in the embedded JavaScript.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;adobe-dc-view&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos"> 2</span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://documentcloud.adobe.com/view-sdk/main.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos"> 3</span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="linenos"> 4</span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;adobe_dc_view_sdk.ready&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="linenos"> 5</span>   <span class="kd">var</span> <span class="nx">adobeDCView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdobeDC</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span><span class="nx">clientId</span><span class="o">:</span> <span class="s2">&quot;&lt;YOUR_CLIENT_ID&gt;&quot;</span><span class="p">,</span> <span class="nx">divId</span><span class="o">:</span> <span class="s2">&quot;adobe-dc-view&quot;</span><span class="p">});</span>
<span class="linenos"> 6</span>   <span class="nx">adobeDCView</span><span class="p">.</span><span class="nx">previewFile</span><span class="p">({</span>
<span class="linenos"> 7</span>     <span class="nx">content</span><span class="o">:</span><span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="p">{</span><span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;https://documentcloud.adobe.com/view-sdk-demo/PDFs/Bodea Brochure.pdf&quot;</span><span class="p">}},</span>
<span class="linenos"> 8</span>     <span class="nx">metaData</span><span class="o">:</span><span class="p">{</span><span class="nx">fileName</span><span class="o">:</span> <span class="s2">&quot;Bodea Brochure.pdf&quot;</span><span class="p">}</span>
<span class="hll"><span class="linenos"> 9</span>   <span class="p">},</span> <span class="p">{</span><span class="nx">showAnnotationTools</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>
</span><span class="linenos">10</span><span class="p">});</span>
<span class="linenos">11</span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos">12</span><span class="c">&lt;!--Get the samples from https://www.adobe.com/go/pdfembedapi_samples--&gt;</span>
</pre></div>
</div>
</section>
<section id="commenting-feature-overview">
<h2>Commenting feature overview<a class="headerlink" href="#commenting-feature-overview" title="Permalink to this headline">¶</a></h2>
<p>The basic commenting features supported by Embed API include:</p>
<ul class="simple">
<li><p>Adding text comments, sticky notes, highlights, underlines, strikethroughs, drawing markups, etc.</p></li>
<li><p>Updating annotations</p></li>
<li><p>Removing annotations</p></li>
<li><p>Replying to annotations</p></li>
</ul>
<p>All the annotation types provided by PDF Embed API deliver the following functionality:</p>
<ul class="simple">
<li><p>Support for adding replies to annotations so that document recipients can respond to the author’s original markup. All comments appear in the right-hand comments panel.</p></li>
<li><p>Adding or updating any annotation enables the <strong>Save</strong> button.</p></li>
<li><p>Once saved, the annotation is added to the PDF and becomes part of the PDF buffer.</p></li>
</ul>
<img alt="_images/viewerui1.png" src="_images/viewerui1.png" />
<section id="freehand-text-comments">
<h3>Freehand text comments<a class="headerlink" href="#freehand-text-comments" title="Permalink to this headline">¶</a></h3>
<p>Users can add freehand text anywhere on a PDF page as follows: select the Add Text tool in the top bar, click on the page to place the cursor and type in your desired text. Click outside the text box to add the annotation. A comment with the same text also appears in the right-hand comments panel. Features include:</p>
<ul class="simple">
<li><p>Updating free text annotation: Click on an existing add text annotation to edit the text or change any of the text attributes from the toolbar. You can change attributes such as colour and font size of the free text. <strong>Note</strong>: The display of the text size is relative to the PDF zoom level. Text can also be edited by clicking on the Edit option in the overflow menu for the associated comment in the comments panel.</p></li>
<li><p>Removing free text annotation</p>
<ul>
<li><p>Click any existing add text annotation to open the toolbar, and choose <strong>Delete</strong>.</p></li>
<li><p>Alternatively, click the overflow menu for the associated comment in the comments panel, and choose <strong>Delete</strong>.</p></li>
</ul>
</li>
<li><p>Moving or resizing free text annotation: Place the cursor on an existing add text annotation and move the free text to a different location on the same PDF page. You can also drag one of the corner circles of the text box to resize.</p></li>
</ul>
<img alt="_images/addtext_menu.png" src="_images/addtext_menu.png" />
</section>
<section id="sticky-notes">
<h3>Sticky notes<a class="headerlink" href="#sticky-notes" title="Permalink to this headline">¶</a></h3>
<p>Use the sticky note to add a text message and place it anywhere on the PDF. There is no support for resizing. Features include:</p>
<ul class="simple">
<li><p>Adding a sticky note</p>
<ul>
<li><p>Select the sticky note tool in the top bar and click where you want to place the note. This opens a comment box where you can type in some text. Click Post to add the comment.</p></li>
<li><p>You can also add a sticky note by performing right-click and selecting <em>Add sticky note</em> option from the popover menu.</p></li>
</ul>
</li>
<li><p>Updating sticky note</p>
<ul>
<li><p>Click on an existing sticky note to open a toolbar to change the colour of the note.</p></li>
<li><p>Edit the comment by clicking on the Edit option in the overflow menu in the comments panel.</p></li>
</ul>
</li>
<li><p>Removing sticky note</p>
<ul>
<li><p>Click on an existing sticky note to open the toolbar and click on delete option to remove the note.</p></li>
<li><p>Alternatively, click on the overflow menu for the comment in the comments panel and click on the Delete option.</p></li>
</ul>
</li>
<li><p>Moving a sticky note: Place the cursor over an existing sticky note and drag to move it to some other location.</p></li>
</ul>
<img alt="_images/stickynote1.png" src="_images/stickynote1.png" />
</section>
<section id="text-markup-annotations">
<h3>Text markup annotations<a class="headerlink" href="#text-markup-annotations" title="Permalink to this headline">¶</a></h3>
<p>Embed API supports the following highlighting, strikethrough, and underlining. Features include:</p>
<img alt="_images/textselectiontool.png" src="_images/textselectiontool.png" />
<ul class="simple">
<li><p>Adding a text markup: There are two ways to add a text markup:</p>
<ul>
<li><p>Click the highlight tool in the top bar and select some text. The text gets highlighted and a comment box opens up where you can type in some text.</p></li>
<li><p>Select some text. Select either the highlight, strikethrough or underline options from the context menu. The markup is added and a comment box opens up where you can type in some text.</p></li>
</ul>
</li>
</ul>
<img alt="_images/contextmenu.png" src="_images/contextmenu.png" />
<ul class="simple">
<li><p>Updating a text markup: While moving or resizing text markup is unsupported, you can:</p>
<ul>
<li><p>Click on an existing text markup to open a toolbar to change the colour.</p></li>
<li><p>You can edit the comment by clicking on the Edit option in the overflow menu in the comments panel.</p></li>
</ul>
</li>
</ul>
<img alt="_images/highlight_menu.png" src="_images/highlight_menu.png" />
<ul class="simple">
<li><p>Removing a text markup</p>
<ul>
<li><p>Click on an existing text markup to open the toolbar, and choose <strong>Delete</strong>.</p></li>
<li><p>Click on the overflow menu for the comment in the comments panel, and choose <strong>Delete</strong>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="drawing-tool">
<h3>Drawing tool<a class="headerlink" href="#drawing-tool" title="Permalink to this headline">¶</a></h3>
<p>Use this tool to create any freehand drawing or shape. Features include:</p>
<ul class="simple">
<li><p>Adding a drawing</p>
<ul>
<li><p>Select the drawing tool in the top bar, click where you want to begin drawing and drag to create a shape. You can release the mouse button, move the pointer to a new location, and continue drawing. The drawing gets added along with a default comment in the comments panel.</p></li>
<li><p>You can also add a drawing by performing right-click and selecting <em>Use drawing tool</em> option from the popover menu.</p></li>
</ul>
</li>
<li><p>Updating a drawing</p>
<ul>
<li><p>Click on an existing drawing to display the toolbar. You can change attributes such as colour and stroke width.</p></li>
<li><p>You can edit the comment by clicking on the Edit option in the overflow menu in the comments panel.</p></li>
</ul>
</li>
<li><p>Removing a drawing</p>
<ul>
<li><p>Click on an existing drawing to display the toolbar and click on the delete option.</p></li>
<li><p>Alternatively, click on the overflow menu for the comment in the comments panel and click on the Delete option.</p></li>
</ul>
</li>
<li><p>Moving or resizing a drawing</p>
<ul>
<li><p>Place the cursor over a drawing and drag to move it to a different location.</p></li>
<li><p>Place the cursor over a drawing and drag one of the corner circles to resize the annotation.</p></li>
</ul>
</li>
</ul>
<img alt="_images/drawing_menu.png" src="_images/drawing_menu.png" />
</section>
<section id="eraser-tool">
<h3>Eraser tool<a class="headerlink" href="#eraser-tool" title="Permalink to this headline">¶</a></h3>
<p>This tool can be used to erase parts of freehand drawing annotations you added via the drawing tool.</p>
<p>Select the eraser tool in the top bar and drag it across the areas of the drawing annotation that you wish to remove. The updated drawing annotation is saved to the PDF.</p>
<ul class="simple">
<li><p>Parts of a single drawing or multiple drawing annotations can be erased at the same time.  The corresponding drawing annotations are updated in the PDF.</p></li>
<li><p>If the entire drawing is erased, then that particular drawing annotation gets removed from the PDF.</p></li>
</ul>
<img alt="_images/eraser.png" src="_images/eraser.png" />
</section>
<section id="undo-or-redo-changes">
<h3>Undo or Redo changes<a class="headerlink" href="#undo-or-redo-changes" title="Permalink to this headline">¶</a></h3>
<p>You can reverse the previous action by using the Undo tool in the top bar. Each undo command reverses one action. Continue clicking Undo to remove as many of the previous actions as necessary.</p>
<p>Use the Redo tool to reverse the action of the undo command.</p>
<img alt="_images/undo_redo.png" src="_images/undo_redo.png" />
</section>
</section>
<section id="annotations-api-overview">
<h2>Annotations API overview<a class="headerlink" href="#annotations-api-overview" title="Permalink to this headline">¶</a></h2>
<p>The annotations API supports  programmatic importing, creating, deleting, updating, and exporting both comments (sticky notes) and other types of markup such as underlines and highlight. The PDF Embed API provides two configuration variables to enable and control annotations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enableAnnotationAPIs</span></code>: Default is <em>false</em>. <em>true</em> enables the APIs. The client’s application passes the annotations and PDF buffer to the PDF Embed API which renders it in the browser.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">includePDFAnnotations</span></code>:  Default is <em>false</em>. When <em>true</em>, the API displays existing annotations. Supported annotations can be modified and unsupported annotations are read only. Annotation modifications enable the <strong>Save</strong> button so that add, update, and delete actions may be saved to the PDF.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When only <code class="docutils literal notranslate"><span class="pre">enableAnnotationAPIs</span></code> is <em>true</em>, adding or updating annotations does not alter the original PDF content. When both these variables are <em>true</em>, the APIs alter the original PDF.</p>
</div>
<p>Both variables may be passed as a preview configuration to the <code class="docutils literal notranslate"><span class="pre">previewFile</span></code> API.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Preview</span> <span class="n">configuration</span>
<span class="p">{</span>
  <span class="n">enableAnnotationAPIs</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="n">includePDFAnnotations</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since these variables interact with each other, there are several scenarios:</p>
<ol class="arabic simple">
<li><p>If the annotation APIs are not enabled (<code class="docutils literal notranslate"><span class="pre">enableAnnotationAPIs:</span> <span class="pre">false</span></code>), then <code class="docutils literal notranslate"><span class="pre">includePDFAnnotations</span></code> is ignored.</p></li>
<li><p>If annotations APIs are enabled (<code class="docutils literal notranslate"><span class="pre">enableAnnotationAPIs:</span> <span class="pre">true</span></code>) and <code class="docutils literal notranslate"><span class="pre">includePDFAnnotations:</span> <span class="pre">false</span></code>, then:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>The PDF Embed API does not display existing annotations, but will display new ones.</p></li>
<li><p>Any annotation added or updated either from the UI or API is not saved to the PDF buffer; therefore, no <strong>Save</strong> button appears in the top bar.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>If both <code class="docutils literal notranslate"><span class="pre">enableAnnotationAPIs</span></code> and <code class="docutils literal notranslate"><span class="pre">includePDFAnnotations</span></code> are <em>true</em>, then:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Any existing annotation the PDF Embed API supports is displayed and accessible through these APIs. Note that unsupported annotations appear in read-only mode and are not accessible to the  APIs.</p></li>
<li><p>Any annotation added or updated from UI or API is saved to the PDF buffer, and the Save button is enabled when the PDF has unsaved changes.</p></li>
</ul>
</div></blockquote>
</section>
<section id="annotation-schema">
<span id="schema"></span><h2>Annotation schema<a class="headerlink" href="#annotation-schema" title="Permalink to this headline">¶</a></h2>
<p>Annotation data passed to or sent from any API should exist in a well known and widely accepted standard format. In support of standards and global adoption then, the PDF Embed API supports a strict subset of the <a class="reference external" href="https://www.w3.org/TR/annotation-model/">Web Annotations Data Model</a> (a W3C recommendation). The Web Annotations Data Model specification provides comprehensive information about a resource or associations between resources.</p>
<p>The PDF Embed API’s annotation model therefore requires the following key fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="s2">&quot;https://www.w3.org/ns/anno.jsonld&quot;</span><span class="p">,</span>
     <span class="s2">&quot;https://comments.acrobat.com/ns/anno.jsonld&quot;</span>
   <span class="p">],</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ANNOTATION_ID</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">&quot;bodyValue&quot;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
  <span class="s2">&quot;motivation&quot;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
  <span class="s2">&quot;stylesheet&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;CssStylesheet&quot;</span><span class="p">,</span>
     <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">CSS_DEFINITION</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">target</span><span class="o">-</span><span class="n">node</span><span class="o">&gt;</span> <span class="n">OR</span> <span class="o">&lt;</span><span class="n">target</span><span class="o">-</span><span class="n">reply</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Person&quot;</span><span class="p">,</span>
     <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
   <span class="p">},</span>
  <span class="s2">&quot;created&quot;</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">,</span>
  <span class="s2">&quot;modified&quot;</span><span class="p">:</span> <span class="n">DateTime</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Annotations data parameters</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 80%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>context</p></td>
<td><p>The context that determines the meaning of the JSON as an annotation. The annotation MUST have these two values in the context parameter:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.w3.org/ns/anno.jsonld">https://www.w3.org/ns/anno.jsonld</a>,</p></li>
<li><p><a class="reference external" href="https://comments.acrobat.com/ns/anno.jsonld">https://comments.acrobat.com/ns/anno.jsonld</a></p></li>
</ul>
</td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>type</p></td>
<td><p>The annotation type which must be  <em>Annotation</em>.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>id</p></td>
<td><p>The annotation’s unique identifier.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>bodyValue</p></td>
<td><p>The string value of the plain text comment associated with the annotation.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>motivation</p></td>
<td><p>The motivation for an annotation is a reason for its creation and might include things like replying to another annotation or commenting on a resource. The value can be either  <em>commenting</em> or  <em>replying</em>.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>target</p></td>
<td><p>The value can be either in the form of <code class="docutils literal notranslate"><span class="pre">target-node</span></code> for a comment or <code class="docutils literal notranslate"><span class="pre">target-reply</span></code> for reply to an annotation.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>creator.type</p></td>
<td><p>Creator refers to the agent responsible for creating the annotation. The PDF Embed API’s required value is <em>Person</em> which denotes a human agent.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>creator.name</p></td>
<td><p>The name of the annotation creator.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>created</p></td>
<td><p>The date-time in UTC timezone format to denote the annotation modification time after it was created. Use xsd:dateTime with the UTC timezone expressed as “Z”.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>modified</p></td>
<td><p>The date-time in UTC timezone format to denote the annotation modification time after it was created. Use xsd:dateTime with the UTC timezone expressed as “Z”.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>source</p></td>
<td><p>The PDF’s unique identifier. This is same as the value of <code class="docutils literal notranslate"><span class="pre">id</span></code> in the metadata field in the <code class="docutils literal notranslate"><span class="pre">previewFile</span></code> API.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>stylesheet.type</p></td>
<td><p>The type of style applied to freehand text annotations. The only permissible value is CssStylesheet.</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>stylesheet.value</p></td>
<td><p>This specifies the font size and colour as a valid CSS JSON. This parameter is applicable only in case of freehand text annotations.</p>
<p><strong>Note:</strong> In the current implementation, there is no support to set the font family of the text annotation. Depending on the language of the text, the following font families will be applied:</p>
<ul class="simple">
<li><p>English: Helvetica</p></li>
<li><p>Chinese Simplified: Adobe Song Std L</p></li>
<li><p>Chinese Traditional: Kozuka Mincho Pr6N R</p></li>
<li><p>Japanese: Kozuka Mincho Pr6N R</p></li>
<li><p>Korean: Adobe Myungjo Std M</p></li>
<li><p>Other languages: Helvetica</p></li>
</ul>
</td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
<p>If the annotation is a comment on the PDF, then the value of the <code class="docutils literal notranslate"><span class="pre">target</span></code> parameter is <em>target-node</em> as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">FILE_ID</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="s2">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AdobeAnnoSelector&quot;</span><span class="p">,</span>
   <span class="s2">&quot;subtype&quot;</span> <span class="p">:</span> <span class="s2">&quot;note&quot;</span> <span class="o">|</span> <span class="s2">&quot;strikeout&quot;</span> <span class="o">|</span> <span class="s2">&quot;highlight&quot;</span> <span class="o">|</span> <span class="s2">&quot;underline&quot;</span> <span class="o">|</span> <span class="s2">&quot;shape&quot;</span><span class="p">,</span>
   <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">PAGE_INDEX</span><span class="o">&gt;</span>
   <span class="p">},</span>
   <span class="s2">&quot;boundingBox&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">Xmin</span><span class="p">,</span> <span class="n">Ymin</span><span class="p">,</span> <span class="n">Xmax</span><span class="p">,</span> <span class="n">Ymax</span><span class="p">],</span>
   <span class="s2">&quot;quadPoints&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="o">....</span> <span class="p">],</span>
   <span class="s2">&quot;inkList&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="o">...</span> <span class="p">],</span>
   <span class="s2">&quot;strokeColor&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">COLOR_HEX_CODE</span><span class="o">&gt;</span><span class="p">,</span>
   <span class="s2">&quot;strokeWidth&quot;</span><span class="p">:</span> <span class="n">Float</span><span class="p">,</span>
   <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="n">Float</span> <span class="p">(</span><span class="kn">from</span> <span class="mf">0.0</span> <span class="n">to</span> <span class="mf">1.0</span><span class="p">),</span>
   <span class="s2">&quot;styleClass&quot;</span><span class="p">:</span> <span class="n">String</span>
 <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the annotation is a reply to an existing annotation, then the value of the <code class="docutils literal notranslate"><span class="pre">target</span></code> parameter is <em>target-reply</em> which contains a single parameter denoting the annotation ID of the parent annotation (the annotation associated with the current reply):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ANNOTATION_ID</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">target-node parameters</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 70%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>source</p></td>
<td><p>The PDF’s unique identifier</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>selector.type</p></td>
<td><p>The PDF Embed API supports one value: <em>AdobeAnnoSelector</em></p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>selector.subtype</p></td>
<td><p>The type of annotation. Permissible values include:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>note</em></p></li>
<li><p><em>highlight</em></p></li>
<li><p><em>shape</em></p></li>
<li><p><em>underline</em></p></li>
<li><p><em>strikeout</em></p></li>
<li><p><em>freetext</em></p></li>
</ul>
</div></blockquote>
</td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>selector.node</p></td>
<td><p>The element within a document upon which the user is commenting. For PDF documents, the <code class="docutils literal notranslate"><span class="pre">node</span></code> object contains a single property named <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>selector.node.index</p></td>
<td><p>The PDF page index starting from 0.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>selector.boundingBox</p></td>
<td><p>The PDF page coordinates of the rectangular bounding box containing the annotation. The value will be an array of four coordinates [Xmin, Ymin, Xmax, Ymax] which represent the box bounded from Xmin to Xmax on X-axis and Ymin to Ymax on Y-axis. All the values Xmin, Ymin, Xmax, and Ymax are of float type.</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>selector.quadPoints</p></td>
<td><p>This is used only for the highlight, underline or strikeout annotation types. The PDF page coordinates of the upper-left, upper-right, lower-left and lower-right corners of each rectangular bounding box containing the annotation. The value will be an array of multiple coordinates [X1, Y1, X2, Y2, …] of all the rectangular boxes. All the coordinate values are of float type.</p></td>
<td><p>Required only if annotation subtype is  <em>highlight</em>,  <em>underline</em> or  <em>strikeout</em>.</p></td>
</tr>
<tr class="row-odd"><td><p>selector.inkList</p></td>
<td><p>Float. The PDF page coordinates of the shape annotation. The value will be an array of N arrays [[X1, Y1, X2, Y2, …], [X1, Y1, X2, Y2, …], …], where each array is a series of alternating X-axis and Y-axis coordinates specifying points along which the shape is drawn.</p></td>
<td><p>Required only if annotation subtype is  <em>shape</em>.</p></td>
</tr>
<tr class="row-even"><td><p>selector.strokeColor</p></td>
<td><p>The HEX color of the annotation as displayed in the UI.</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>selector.strokeWidth</p></td>
<td><p>Float value specifying the line thickness of the drawing annotation.</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>selector.opacity</p></td>
<td><p>Float value between 0.0 and 1.0 specifying the opacity of the annotation.</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>styleClass</p></td>
<td><p>Contains the CSS class specified in stylesheet.value. The style will be applied to the add text annotation.</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">target-reply parameters</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 70%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>source</p></td>
<td><p>The unique identifier of the parent annotation with which this reply is associated.</p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
<section id="annotation-data-examples">
<h3>Annotation data examples<a class="headerlink" href="#annotation-data-examples" title="Permalink to this headline">¶</a></h3>
<p>You can find addtional samples and examples code in the <a class="reference external" href="https://www.adobe.com/go/pdfembedapi_samples">samples repo</a>.</p>
<section id="note-annotation-data">
<h4>Note annotation data<a class="headerlink" href="#note-annotation-data" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
      <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;https://www.w3.org/ns/anno.jsonld&quot;</span><span class="p">,</span>
          <span class="s2">&quot;https://comments.acrobat.com/ns/anno.jsonld&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;079d66a4-5ec2-4703-ae9d-30ccbb1aa84c&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bodyValue&quot;</span><span class="p">:</span> <span class="s2">&quot;I added a note!&quot;</span><span class="p">,</span>
      <span class="s2">&quot;motivation&quot;</span><span class="p">:</span> <span class="s2">&quot;commenting&quot;</span><span class="p">,</span>
      <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;77c6fa5d-6d74-4104-8349-657c8411a834&quot;</span><span class="p">,</span>
          <span class="s2">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="mi">1</span>
              <span class="p">},</span>
              <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
              <span class="s2">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;note&quot;</span><span class="p">,</span>
              <span class="s2">&quot;boundingBox&quot;</span><span class="p">:</span> <span class="p">[</span>
                  <span class="mf">69.3311157226562</span><span class="p">,</span>
                  <span class="mf">76.4769897460938</span><span class="p">,</span>
                  <span class="mf">86.9484252929688</span><span class="p">,</span>
                  <span class="mf">94.63037109375</span>
              <span class="p">],</span>
              <span class="s2">&quot;strokeColor&quot;</span><span class="p">:</span> <span class="s2">&quot;#ff0808&quot;</span><span class="p">,</span>
              <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AdobeAnnoSelector&quot;</span>
          <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Person&quot;</span><span class="p">,</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John Smith&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;created&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-08-02T14:45:37Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;modified&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-01-20T07:54:10Z&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="reply-annotation-data">
<h4>Reply annotation data<a class="headerlink" href="#reply-annotation-data" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="s2">&quot;https://www.w3.org/ns/anno.jsonld&quot;</span><span class="p">,</span>
       <span class="s2">&quot;https://comments.acrobat.com/ns/anno.jsonld&quot;</span>
   <span class="p">],</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
   <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;eb46d1a9-e9c3-4e81-a6f4-ce5ba7a905e9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;bodyValue&quot;</span><span class="p">:</span> <span class="s2">&quot;Reply to this&quot;</span><span class="p">,</span>
   <span class="s2">&quot;motivation&quot;</span><span class="p">:</span> <span class="s2">&quot;replying&quot;</span><span class="p">,</span>
   <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;079d66a4-5ec2-4703-ae9d-30ccbb1aa84c&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Person&quot;</span><span class="p">,</span>
       <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Samuel Lee&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;created&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-02T14:45:37Z&quot;</span><span class="p">,</span>
   <span class="s2">&quot;modified&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-02-02T07:57:03Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="add-text-annotation-data">
<h4>Add text annotation data<a class="headerlink" href="#add-text-annotation-data" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
      <span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;https://www.w3.org/ns/anno.jsonld&quot;</span><span class="p">,</span>
          <span class="s2">&quot;https://comments.acrobat.com/ns/anno.jsonld&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;02dcf931-d1cb-49c1-a8bc-d047892a06bc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bodyValue&quot;</span><span class="p">:</span> <span class="s2">&quot;I added a text annotation&quot;</span><span class="p">,</span>
      <span class="s2">&quot;motivation&quot;</span><span class="p">:</span> <span class="s2">&quot;commenting&quot;</span><span class="p">,</span>
      <span class="s2">&quot;stylesheet&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;CssStylesheet&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;body-value-css { font: 13px Helvetica; color: #0000FF; }&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;77c6fa5d-6d74-4104-8349-657c8411a834&quot;</span><span class="p">,</span>
          <span class="s2">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;node&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="mi">1</span>
              <span class="p">},</span>
              <span class="s2">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;freetext&quot;</span><span class="p">,</span>
              <span class="s2">&quot;boundingBox&quot;</span><span class="p">:</span> <span class="p">[</span>
                  <span class="mf">306.41829735235586</span><span class="p">,</span>
                  <span class="mf">339.01199687491595</span><span class="p">,</span>
                  <span class="mf">475.729044456285</span><span class="p">,</span>
                  <span class="mf">357.0653042030006</span>
              <span class="p">],</span>
              <span class="s2">&quot;styleClass&quot;</span><span class="p">:</span> <span class="s2">&quot;body-value-css&quot;</span><span class="p">,</span>
              <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;AdobeAnnoSelector&quot;</span>
          <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;creator&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Person&quot;</span><span class="p">,</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John Smith&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;created&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-01-15T14:45:37Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;modified&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-01-15T14:45:37Z&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="annotations-interface">
<h2>Annotations interface<a class="headerlink" href="#annotations-interface" title="Permalink to this headline">¶</a></h2>
<p>In order to invoke any annotations API, the PDF Embed API provides the <code class="docutils literal notranslate"><span class="pre">AnnotationManager</span></code> interface. You can invoke all the APIs from this interface. Before using this interface, you must set <code class="docutils literal notranslate"><span class="pre">enableAnnotationAPIs</span></code> to <em>true</em> and pass it as a preview configuration to the <code class="docutils literal notranslate"><span class="pre">previewFile</span></code> API.</p>
<p>Invoke the APIs with the <code class="docutils literal notranslate"><span class="pre">annotationManager</span></code> as follows:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos"> 2</span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos"> 3</span> <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Adobe Document Cloud PDF Embed API Sample<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos"> 4</span> <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">/&gt;</span>
<span class="linenos"> 5</span> <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;IE=edge,chrome=1&quot;</span><span class="p">/&gt;</span>
<span class="linenos"> 6</span> <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">/&gt;</span>
<span class="linenos"> 7</span><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="p">&lt;</span><span class="nt">body</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;margin: 0px&quot;</span><span class="p">&gt;</span>
<span class="linenos">10</span> <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;adobe-dc-view&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos">11</span> <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://documentcloud.adobe.com/view-sdk/main.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos">12</span> <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="linenos">13</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;adobe_dc_view_sdk.ready&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span>
<span class="linenos">14</span> <span class="p">{</span>
<span class="linenos">15</span>  <span class="kd">var</span> <span class="nx">adobeDCView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdobeDC</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span><span class="nx">clientId</span><span class="o">:</span> <span class="s2">&quot;&lt;YOUR_CLIENT_ID&gt;&quot;</span><span class="p">,</span> <span class="nx">divId</span><span class="o">:</span> <span class="s2">&quot;adobe-dc-view&quot;</span><span class="p">});</span>
<span class="linenos">16</span>  <span class="kd">var</span> <span class="nx">previewFilePromise</span> <span class="o">=</span> <span class="nx">adobeDCView</span><span class="p">.</span><span class="nx">previewFile</span><span class="p">({</span>
<span class="linenos">17</span>   <span class="nx">content</span><span class="o">:</span>   <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="p">{</span><span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;https://documentcloud.adobe.com/view-sdk-demo/PDFs/Bodea Brochure.pdf&quot;</span><span class="p">}},</span>
<span class="linenos">18</span>   <span class="nx">metaData</span><span class="o">:</span>  <span class="p">{</span><span class="nx">fileName</span><span class="o">:</span> <span class="s2">&quot;Bodea Brochure.pdf&quot;</span><span class="p">,</span> <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;77c6fa5d-6d74-4104-8349-657c8411a834&quot;</span><span class="p">}</span>
<span class="linenos">19</span>  <span class="p">},</span>
<span class="linenos">20</span>  <span class="p">{</span>
<span class="hll"><span class="linenos">21</span>   <span class="nx">enableAnnotationAPIs</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class="linenos">22</span>  <span class="p">});</span>
<span class="linenos">23</span>
<span class="linenos">24</span>  <span class="nx">previewFilePromise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">adobeViewer</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="hll"><span class="linenos">25</span>   <span class="nx">adobeViewer</span><span class="p">.</span><span class="nx">getAnnotationManager</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">annotationManager</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span class="linenos">26</span>    <span class="c1">// All annotation APIs can be invoked here</span>
<span class="linenos">27</span>   <span class="p">});</span>
<span class="linenos">28</span>  <span class="p">});</span>
<span class="linenos">29</span> <span class="p">});</span>
<span class="linenos">30</span> <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos">31</span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos">32</span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you enabled the annotation APIs, you must pass a PDF ID in the metadata field when invoking the <code class="docutils literal notranslate"><span class="pre">previewFile</span></code> API. This ID uniquely identifies the PDF so that annotations can be added.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adobeDCView</span><span class="o">.</span><span class="n">previewFile</span><span class="p">({</span>
   <span class="n">content</span><span class="p">:</span>   <span class="p">{</span><span class="n">location</span><span class="p">:</span> <span class="p">{</span><span class="n">url</span><span class="p">:</span> <span class="s2">&quot;https://documentcloud.adobe.com/view-sdk-demo/PDFs/Bodea Brochure.pdf&quot;</span><span class="p">}},</span>
   <span class="n">metaData</span><span class="p">:</span>  <span class="p">{</span><span class="n">fileName</span><span class="p">:</span> <span class="s2">&quot;Bodea Brochure.pdf&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;77c6fa5d-6d74-4104-8349-657c8411a834&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="basic-apis-for-commenting">
<h2>Basic APIs for commenting<a class="headerlink" href="#basic-apis-for-commenting" title="Permalink to this headline">¶</a></h2>
<p>The PDF Embed API offers several APIs which allow you to programatically add, import, export, delete, and update annotations.</p>
<section id="addannotations-api">
<h3>addAnnotations API<a class="headerlink" href="#addannotations-api" title="Permalink to this headline">¶</a></h3>
<p>This API adds or imports (only) supported annotations. It takes a JSON array as input which contains the annotation data. The annotation data must be in the specified in the <a class="reference internal" href="#schema"><span class="std std-ref">Annotation schema</span></a>. Either a single annotation or multiple annotations can be added.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>A JSON array containing the list of annotations: <code class="docutils literal notranslate"><span class="pre">[Annotation_1,</span> <span class="pre">Annotation_2,</span> <span class="pre">...]</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves on a successful API operation</p></li>
<li><p>Rejects with error object including code and message on API failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">list_of_annotations</span> <span class="o">=</span> <span class="p">[</span><span class="n">Annotation_1</span><span class="p">,</span> <span class="n">Annotation_2</span><span class="p">,</span> <span class="o">...</span><span class="p">];</span>

<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">annotationManager</span><span class="o">.</span><span class="n">addAnnotations</span><span class="p">(</span><span class="n">list_of_annotations</span><span class="p">)</span>
                                        <span class="o">.</span><span class="n">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">))</span>
                                        <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
         <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="getannotations-api">
<h3>getAnnotations API<a class="headerlink" href="#getannotations-api" title="Permalink to this headline">¶</a></h3>
<p>This API exports and receives PDF annotation data based on the filter provided by the client. The annotations are returned in the form of a JSON array, and the annotation data will be in the format as described in the <a class="reference internal" href="#schema"><span class="std std-ref">Annotation schema</span></a>.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><ul class="simple">
<li><p>If no filter is provided, then data for all of the annotations is returned.</p></li>
<li><p>If a list of annotation IDs is passed in the filter, then only the annotations matching those IDs is  returned.</p></li>
<li><p>If page range is passed in the filter, then only the annotations in those pages is returned.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">annotationIds</span><span class="p">:</span>
                <span class="p">[</span><span class="n">Annotation_ID_1</span><span class="p">,</span> <span class="n">Annotation_ID_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
        <span class="n">pageRange</span><span class="p">:{</span>
                <span class="n">startPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span><span class="p">,</span>
                <span class="n">endPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span>
        <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which,</p>
<ul class="simple">
<li><p>Resolves with a list of annotations on success,</p></li>
<li><p>Rejects with an error object which includes a code and message on operation failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="nb">filter</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">annotationIds</span><span class="p">:</span> <span class="p">[</span><span class="n">Annotation_ID_1</span><span class="p">,</span> <span class="n">Annotation_ID_2</span><span class="p">,</span> <span class="o">...</span><span class="p">];</span>
        <span class="o">//</span> <span class="n">OR</span><span class="p">,</span>
        <span class="o">//</span> <span class="n">pageRange</span><span class="p">:</span> <span class="p">{</span><span class="n">startPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">endPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span><span class="p">};</span>
<span class="p">}</span>


<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">annotationManager</span><span class="o">.</span><span class="n">getAnnotations</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>
                                        <span class="o">.</span><span class="n">then</span> <span class="p">(</span><span class="n">result</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
                                        <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
 <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">includePDFAnnotations</span></code> is set to <em>true</em>, then any existing annotation in PDF which the PDF Embed API supports is accessible through the annotation APIs. The data for these annotations can be received through the GET API. Note that the ID of such annotations received in the GET API output will be different for every browser session.</p>
</div>
</section>
<section id="deleteannotations-api">
<h3>deleteAnnotations API<a class="headerlink" href="#deleteannotations-api" title="Permalink to this headline">¶</a></h3>
<p>This API deletes PDF annotations based on the filter provided by the client.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><ul>
<li><p>If no filter is provided, then all the PDF annotations are deleted.</p></li>
<li><p>If a list of annotation IDs is passed in the filter, then only the annotations matching those IDs are  deleted. The other annotations will remain.</p></li>
<li><p>If a page range is passed in the filter, then only the annotations in those pages are deleted. The other annotations remain.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">annotationIds</span><span class="p">:</span>
     <span class="p">[</span><span class="n">Annotation_ID_1</span><span class="p">,</span> <span class="n">Annotation_ID_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
  <span class="n">pageRange</span><span class="p">:{</span>
     <span class="n">startPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span><span class="p">,</span>
     <span class="n">endPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves on successful delete operation</p></li>
<li><p>Rejects with error object including code and message on delete operation failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="nb">filter</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">annotationIds</span><span class="p">:</span> <span class="p">[</span><span class="n">Annotation_ID_1</span><span class="p">,</span> <span class="n">Annotation_ID_2</span><span class="p">,</span> <span class="o">...</span><span class="p">];</span>
        <span class="o">//</span> <span class="n">OR</span><span class="p">,</span>
        <span class="o">//</span> <span class="n">pageRange</span><span class="p">:</span> <span class="p">{</span><span class="n">startPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">endPage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Page_Number</span><span class="o">&gt;</span><span class="p">};</span>
<span class="p">}</span>

<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">annotationManager</span><span class="o">.</span><span class="n">deleteAnnotations</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>
                                        <span class="o">.</span><span class="n">then</span> <span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">))</span>
                                        <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
 <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="updateannotation-api">
<h3>updateAnnotation API<a class="headerlink" href="#updateannotation-api" title="Permalink to this headline">¶</a></h3>
<p>This API updates a single existing annotation in the PDF, including the parameter <code class="docutils literal notranslate"><span class="pre">bodyValue</span></code>, parameters <code class="docutils literal notranslate"><span class="pre">font</span></code> and <code class="docutils literal notranslate"><span class="pre">color</span></code> under <code class="docutils literal notranslate"><span class="pre">stylesheet</span></code>, as well as other parameters under <code class="docutils literal notranslate"><span class="pre">selector</span></code> such as, <code class="docutils literal notranslate"><span class="pre">strokeColor</span></code>, <code class="docutils literal notranslate"><span class="pre">strokeWidth</span></code>, <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> and <code class="docutils literal notranslate"><span class="pre">inkList</span></code>.</p>
<p>This API takes the annotation data containing the updated parameters, finds the annotation with the ID present in the input data, and applies the update to that annotation. The annotation data must be in the same format as described in the Annotation schema.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can update the <code class="docutils literal notranslate"><span class="pre">boundingBox</span></code> parameter only for note, add text and drawing annotations using this API.</p>
</div>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>JSON object containing the annotation data.</p></td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves on successful update operation,</p></li>
<li><p>Rejects with error object including code and message on update operation failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">annotation_data</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Annotation_Data</span><span class="o">&gt;</span><span class="p">;</span>

<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">annotationManager</span><span class="o">.</span><span class="n">updateAnnotation</span><span class="p">(</span><span class="n">annotation_data</span><span class="p">)</span>
                                        <span class="o">.</span><span class="n">then</span> <span class="p">(()</span><span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">))</span>
                                        <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
 <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="annotation-events">
<h2>Annotation events<a class="headerlink" href="#annotation-events" title="Permalink to this headline">¶</a></h2>
<p>Website developers can receive events when a user action interacts with an annotation. These events are generated for annotation actions performed through the UI as well as through the annotation APIs.</p>
<p>There are two ways to capture these events: use either the Events callback or the <code class="docutils literal notranslate"><span class="pre">annotationManager</span></code> interface.</p>
<section id="events-callback-usage">
<h3>Events callback usage<a class="headerlink" href="#events-callback-usage" title="Permalink to this headline">¶</a></h3>
<p>Register the events callback and enable the flag <code class="docutils literal notranslate"><span class="pre">enableAnnotationEvents</span></code> to receive these events.</p>
<p>For details, see <a class="reference internal" href="howtodata.html#annotevents"><span class="std std-ref">Annotation events</span></a></p>
</section>
<section id="annotationmanager-interface">
<h3>annotationManager interface<a class="headerlink" href="#annotationmanager-interface" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">annotationManager</span></code> interface listens for events via the <code class="docutils literal notranslate"><span class="pre">registerEventListener</span></code> API. To receive specific event types, pass the list of event types in the <code class="docutils literal notranslate"><span class="pre">listenOn</span></code> parameter. If nothing is passed to <code class="docutils literal notranslate"><span class="pre">listenOn</span></code>, then all the annotation events return.</p>
<p>Note that the events are generated through this interface only when annotation APIs are enabled.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">eventOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Pass</span> <span class="n">the</span> <span class="n">events</span> <span class="n">to</span> <span class="n">receive</span><span class="o">.</span>
  <span class="o">//</span> <span class="n">If</span> <span class="n">no</span> <span class="n">event</span> <span class="ow">is</span> <span class="n">passed</span> <span class="ow">in</span> <span class="n">listenOn</span><span class="p">,</span> <span class="n">then</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">annotation</span> <span class="n">events</span> <span class="n">will</span> <span class="n">be</span> <span class="n">received</span><span class="o">.</span>
  <span class="n">listenOn</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;ANNOTATION_ADDED&quot;</span><span class="p">,</span> <span class="s2">&quot;ANNOTATION_CLICKED&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="n">annotationManager</span><span class="o">.</span><span class="n">registerEventListener</span><span class="p">(</span>
          <span class="n">function</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="p">},</span>
          <span class="n">eventOptions</span>
      <span class="p">);</span>
   <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Possible annotations events appear in the following table. The event data contains the data of the annotation in JSON format on which the event gets triggered.</p>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-text">Event types</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 22%" />
<col style="width: 67%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Event type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Event data</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ANNOTATION_ADDED</p></td>
<td><p>A new annotation is added to PDF from the UI or API.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>ANNOTATION_CLICKED</p></td>
<td><p>Any annotation in the PDF is clicked.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-even"><td><p>ANNOTATION_UPDATED</p></td>
<td><p>The annotation is updated from the UI or API.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>ANNOTATION_DELETED</p></td>
<td><p>The annotation is deleted from the UI or API.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-even"><td><p>ANNOTATION_MOUSE_OVER</p></td>
<td><p>The mouse pointer moves over any annotation.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>ANNOTATION_MOUSE_OUT</p></td>
<td><p>The mouse pointer moves out of any annotation.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-even"><td><p>ANNOTATION_SELECTED</p></td>
<td><p>Any annotation is selected from the UI or API.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>ANNOTATION_UNSELECTED</p></td>
<td><p>Any annotation is unselected from the UI or API.</p></td>
<td><p>&lt;ANNOTATION_DATA&gt;</p></td>
</tr>
<tr class="row-even"><td><p>ANNOTATION_MODE_STARTED</p></td>
<td><p>The event is generated when a user selects a particular annotation type from the toolbar or when <code class="docutils literal notranslate"><span class="pre">startAnnotationMode</span></code> is invoked to start any annotation mode.</p></td>
<td><p>&lt;ANNOTATION_TYPE&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>ANNOTATION_MODE_ENDED</p></td>
<td><p>When a user exits any previously selected annotation mode.</p></td>
<td><p>&lt;ANNOTATION_TYPE&gt;</p></td>
</tr>
<tr class="row-even"><td><p>ANNOTATION_COUNT</p></td>
<td><p>Denotes the total number of annotations when any new annotation is added or any existing annotation is deleted.</p></td>
<td><p>&lt;NUMBER_OF_ANNOTATIONS&gt;</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="handling-existing-annotations">
<h2>Handling existing annotations<a class="headerlink" href="#handling-existing-annotations" title="Permalink to this headline">¶</a></h2>
<p>The PDF Embed API provides two additional APIs that remove existing annotations or save new  annotations. These APIs only function when <code class="docutils literal notranslate"><span class="pre">includePDFAnnotations</span></code> is <em>true</em>.</p>
<section id="removeannotationsfrompdf-api">
<h3>removeAnnotationsFromPDF API<a class="headerlink" href="#removeannotationsfrompdf-api" title="Permalink to this headline">¶</a></h3>
<p>This API deletes all annotations and returns both a list of the removed annotations as well as the PDF buffer as output. Note that the API can only remove supported annotations.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves with both a list of removed annotations as well as an updated PDF buffer if the operation succeeds</p></li>
<li><p>Rejects with an error object that includes both an error code and message on operation failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">annotationManager</span><span class="o">.</span><span class="n">removeAnnotationsFromPDF</span><span class="p">()</span>
                                        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">result</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
                                        <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
         <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="addannotationsinpdf-api">
<h3>addAnnotationsInPDF API<a class="headerlink" href="#addannotationsinpdf-api" title="Permalink to this headline">¶</a></h3>
<p>This API takes a list of supported annotations as input and saves those annotations to the PDF buffer. The updated PDF buffer is returned as API output.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>A JSON array of annotation data: <code class="docutils literal notranslate"><span class="pre">[Annotation_1,</span> <span class="pre">Annotation_2,</span> <span class="pre">...]</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves with the updated PDF buffer if the operation succeeds.</p></li>
<li><p>Rejects with an error object that includes both an error code and message on operation failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">list_of_annotations</span> <span class="o">=</span> <span class="p">[</span><span class="n">Annotation_1</span><span class="p">,</span> <span class="n">Annotation_2</span><span class="p">,</span> <span class="o">...</span><span class="p">];</span>

<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">annotationManager</span><span class="o">.</span><span class="n">addAnnotationsInPDF</span><span class="p">(</span><span class="n">list_of_annotations</span><span class="p">)</span>
                                        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">result</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
                                        <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
         <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="apis-to-control-ui-configurations">
<h2>APIs to control UI configurations<a class="headerlink" href="#apis-to-control-ui-configurations" title="Permalink to this headline">¶</a></h2>
<p>UI control is available through the following APIs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setConfig</span></code>: enable and disable UI elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selectAnnotation</span></code>: Select and shift focus to an annotation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unselectAnnotation</span></code>: Unselect an annotation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">startAnnotationMode</span></code>: Enter annotation mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">endAnnotationMode</span></code>: Exit from annotation mode</p></li>
</ul>
<section id="setconfig-api">
<h3>setConfig API<a class="headerlink" href="#setconfig-api" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">setConfig</span></code> allows you to set special UI configurations, including hiding the commenting tools from the top bar, hiding the right-hand comments pane, hiding the toolbar on text selection, and enabling the downloaded and printed PDF to contain annotations even when unsaved to the PDF buffer.</p>
<p>The API supports the following flags. You can pass 1-N flags to the API as needed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">showToolbar</span></code>: This flag shows or hides the add text, sticky note, highlight, drawing and eraser tools in the top bar. The default value is <em>true</em>, and these annotation tools are visible. Set this flag to false if these tools need to be hidden from the top bar.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">showCommentsPanel</span></code>: This flag shows or hides the right-hand comments pane. The default value is <em>true</em>, and the comments pane is visible. Set to <em>false</em> to hide the right-hand comments pane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">showToolsOnTextSelection</span></code>: This flag shows or hides the toolbar available on text selection. The default value is <em>true</em>, and the toolbar is visible. Set to <em>false</em> to hide the toolbar.</p></li>
</ul>
<img alt="_images/drawingtools1.png" src="_images/drawingtools1.png" />
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">downloadWithAnnotations</span></code>: Annotations are not saved to the PDF buffer if annotation APIs are enabled. By default, the downloaded PDF will not contain any annotation. Set to <em>true</em> to download the PDF with all the annotations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">printWithAnnotations</span></code>: Annotations will no longer be saved to the PDF buffer if annotations APIs are enabled. By default, the print does not contain any annotation. Set to <em>true</em> to print the PDF with all the annotations.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can set and pass these flags to either <code class="docutils literal notranslate"><span class="pre">setConfig</span></code> or <code class="docutils literal notranslate"><span class="pre">previewFile</span></code> as shown below.</p>
</div>
<p><strong>Method 1: Pass the flags to setConfig</strong></p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>The list of flags and the corresponding Boolean values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
       <span class="n">showToolbar</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
       <span class="n">showCommentsPanel</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
       <span class="n">downloadWithAnnotations</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span><span class="p">,</span>
       <span class="n">showToolsOnTextSelection</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
       <span class="n">printWithAnnotations</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves on success of operation</p></li>
<li><p>Rejects with error object including code and message on failure.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>       <span class="n">const</span> <span class="n">customFlags</span> <span class="o">=</span> <span class="p">{</span>
               <span class="n">showToolbar</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
               <span class="n">showCommentsPanel</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
               <span class="n">downloadWithAnnotations</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span><span class="p">,</span>
               <span class="n">showToolsOnTextSelection</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
               <span class="n">printWithAnnotations</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">Default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
               <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                               <span class="n">annotationManager</span><span class="o">.</span><span class="n">setConfig</span><span class="p">(</span><span class="n">customFlags</span><span class="p">)</span>
                                               <span class="o">.</span><span class="n">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">))</span>
                                               <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
               <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Method 2: Pass the flags to previewFile</strong></p>
<p>As an alternative to passing to <code class="docutils literal notranslate"><span class="pre">setConfig</span></code>, add the flags to the <code class="docutils literal notranslate"><span class="pre">annotationUIConfig</span></code> object that’s  passed as a preview configuration to the previewFile API.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">annotationUIConfig</span><span class="p">:</span> <span class="p">{</span>
  <span class="n">showToolbar</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="n">showCommentsPanel</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="n">showToolsOnTextSelection</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">true</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="n">downloadWithAnnotations</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="n">printWithAnnotations</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">false</span><span class="o">&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="selectannotation-api">
<h3>selectAnnotation API<a class="headerlink" href="#selectannotation-api" title="Permalink to this headline">¶</a></h3>
<p>This API selects any existing annotation and shifts the focus to the selected annotation. It applies the select operation to the annotation specified by the annotation ID.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>&lt;Annotation_ID&gt;</p></td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves on successful select annotation operation</p></li>
<li><p>Rejects with error object including an error code and message</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">annotation_ID</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Annotation_ID</span><span class="o">&gt;</span><span class="p">;</span>

       <span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
               <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                               <span class="n">annotationManager</span><span class="o">.</span><span class="n">selectAnnotation</span><span class="p">(</span><span class="n">annotation_ID</span><span class="p">)</span>
                                               <span class="o">.</span><span class="n">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">))</span>
                                               <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
        <span class="p">});</span>
       <span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="unselectannotation-api">
<h3>unselectAnnotation API<a class="headerlink" href="#unselectannotation-api" title="Permalink to this headline">¶</a></h3>
<p>This API unselects the last selected annotation.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="n">annotationManager</span><span class="o">.</span><span class="n">unselectAnnotation</span><span class="p">();</span>
 <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="startannotationmode-api">
<h3>startAnnotationMode API<a class="headerlink" href="#startannotationmode-api" title="Permalink to this headline">¶</a></h3>
<p>This API starts a particular annotation mode so that you can annotations of that type or use the eraser tool. The API takes a single annotation mode as input. The annotation mode can be any one of the supported annotation types in PDF Embed API, and it supports the following optional parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">defaultColor</span></code>: A hex code specifying the annotation color. This parameter is applicable for all annotation types.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cursor</span></code>: A <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/cursor">CSS standards-based</a> string value to denote the cursor style on annotation start. This parameter is applicable for all annotation types.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fontSize</span></code>: Font size within the range of 6-24px. This parameter is applicable only in case of freehand text annotations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strokeWidth</span></code>: Stroke width within the range of 1-12, to set the line thickness of the drawing annotation.</p></li>
</ul>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>There are two parameters which accept the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span></code>: Permissible values include: <em>note</em>, <em>highlight</em>, <em>shape</em>, <em>underline</em>, <em>strikeout</em>, <em>freetext</em> or <em>eraser</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>: defaultColor: &lt;COLOR_HEX_CODE&gt;, cursor: &lt;CURSOR_TYPE&gt;, fontSize: &lt;FONT_SIZE&gt;, strokeWidth: &lt;STROKE_WIDTH&gt;</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>Returns a Promise which:</p>
<ul class="simple">
<li><p>Resolves on successful start annotation mode operation</p></li>
<li><p>Rejects with an error object including a code and message</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Add</span> <span class="n">text</span> <span class="n">annotation</span>
<span class="n">const</span> <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;freetext&quot;</span><span class="p">;</span>
<span class="n">const</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">defaultColor</span><span class="p">:</span> <span class="s2">&quot;#b80000&quot;</span><span class="p">,</span>
  <span class="n">cursor</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">,</span>
  <span class="n">fontSize</span><span class="p">:</span> <span class="s2">&quot;15px&quot;</span>
<span class="p">};</span>

<span class="o">//</span> <span class="n">Drawing</span> <span class="n">annotation</span>
<span class="o">/*</span> <span class="n">const</span> <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;shape&quot;</span><span class="p">;</span>
<span class="n">const</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">defaultColor</span><span class="p">:</span> <span class="s2">&quot;#b80000&quot;</span><span class="p">,</span>
  <span class="n">cursor</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">,</span>
  <span class="n">strokeWidth</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">};</span> <span class="o">*/</span>

<span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">annotationManager</span><span class="o">.</span><span class="n">startAnnotationMode</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">result</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
                        <span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
   <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="endannotationmode-api">
<h3>endAnnotationMode API<a class="headerlink" href="#endannotationmode-api" title="Permalink to this headline">¶</a></h3>
<p>This API ends the last started annotation mode.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Input parameters</strong></p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><strong>API output</strong></p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><strong>API signature</strong></p></td>
<td><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">previewFilePromise</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">adobeViewer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">adobeViewer</span><span class="o">.</span><span class="n">getAnnotationManager</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">annotationManager</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">annotationManager</span><span class="o">.</span><span class="n">endAnnotationMode</span><span class="p">();</span>
   <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="code-samples">
<h2>Code Samples<a class="headerlink" href="#code-samples" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://www.adobe.com/go/pdfembedapi_samples">Working code samples reside in Github.</a></p>
</div>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
       Last updated Jul 29, 2021 <br/>
    </p>	
  </div>
  </footer>
  </body>
</html>